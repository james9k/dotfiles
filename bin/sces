#!/bin/bash

#
# smartctl exit status
# 

if [ "${1}x" == "x" ]
then
    echo "Usage:"
    echo "    smes [device]"
    echo ""
    echo "Example:"
    echo "    smes sda"
    exit 1
fi

smartctl -a -q silent /dev/${1}
val=$?; mask=1

echo "Device: /dev/${1}"
echo "Exit Status: ${val}"

for i in 0 1 2 3 4 5 6 7; do
    echo "Bit $i: $(((val & mask) && 1))"
    mask=$((mask << 1))
done
